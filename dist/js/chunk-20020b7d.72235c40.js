(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-20020b7d"],{"126c":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Upload",{ref:"upload",attrs:{action:t.baseURL+"/upload_file",multiple:"","before-upload":t.beforeUpload,"on-success":t.handleSuccess,"show-upload-list":t.showUploadFile}},[n("Button",{attrs:{icon:"icon-cloud-upload-outline"}},[t._v("Upload File")])],1),n("Button",{on:{click:t.handleUpload}},[t._v("上传吧")]),n("Table",{attrs:{columns:t.columns,data:t.fileList}}),n("Modal",{model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[n("div",{staticStyle:{height:"300px",overflow:"auto"}},[t._v("\n      "+t._s(t.content)+"\n    ")])])],1)},i=[],l=(n("6762"),n("2fdb"),n("f121")),a=n("7e1e"),u=n("c092"),s={data:function(){var t=this;this.$createElement;return{baseURL:l["a"],showModal:!1,content:"",showUploadFile:!0,file:{},columns:[{title:"文件key",key:"key"},{title:"文件名",key:"file_name"},{title:"文件类型",key:"file_type"},{title:"文件大小",key:"file_size"},{title:"上传时间",key:"createdAt"},{title:"存储有效期",key:"storage_time",render:function(t,e){var n=e.row;return t("span",[n.storage_time?n.storage_time:"永久"])}},{title:"操作",key:"handle",render:function(e,n){var o=n.row;return e("span",[e("i-button",{attrs:{size:"small",icon:"md-arrow-down"},on:{click:function(){return t.download(o.key)}}}),e("i-button",{attrs:{size:"small",icon:"md-book",disabled:!o.file_type.includes("text")},on:{click:t.showFileContent.bind(t,o.key)}}),e("i-button",{attrs:{size:"small",icon:"md-trash"},on:{click:function(){t.deleteFile(o.key)}}})])}}],fileList:[]}},methods:{beforeUpload:function(t){return this.file=t,!1},handleUpload:function(){this.$refs.upload.post(this.file)},handleSuccess:function(){this.$Message.success("文件上传成功"),this.updateFileList(),this.file=null,this.showUploadFile=!1},updateFileList:function(){var t=this;Object(a["d"])().then(function(e){t.fileList=e})},deleteFile:function(t){var e=this;this.$Modal.confirm({title:"提示",content:"您确定要删除?",onOk:function(){Object(a["a"])(t).then(function(t){e.updateFileList(),e.$Message.success("删除成功")})}})},download:function(t){Object(u["a"])({url:"".concat(l["a"],"/get_file"),params:{key:t,type:"download"}})},showFileContent:function(t){var e=this;Object(a["b"])({key:t,type:"text"}).then(function(t){console.log(t),e.content=t,e.showModal=!0})}},mounted:function(){this.updateFileList()}},r=s,c=n("2877"),d=Object(c["a"])(r,o,i,!1,null,null,null);e["default"]=d.exports},"7e1e":function(t,e,n){"use strict";n.d(e,"f",function(){return i}),n.d(e,"e",function(){return l}),n.d(e,"c",function(){return a}),n.d(e,"d",function(){return u}),n.d(e,"b",function(){return s}),n.d(e,"a",function(){return r}),n.d(e,"g",function(){return c});var o=n("365c"),i=function(){return o["a"].request({url:"/getTableData",method:"post"})},l=function(){return o["a"].request({url:"/getFolderList",method:"get"})},a=function(){return o["a"].request({url:"/getFileList",method:"get"})},u=function(){return o["a"].request({url:"get_file_list",params:{userId:1},method:"get"})},s=function(t){var e=t.key,n=t.type;return o["a"].request({url:"get_file",data:{key:e,type:n},method:"post"})},r=function(t){return o["a"].request({url:"delete_file",data:{key:t},method:"delete"})},c=function(t){t.url;var e=t.data;return o["a"].request({url:"data/formData",data:e,method:"post"})}}}]);